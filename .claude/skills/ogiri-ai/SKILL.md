---
name: ogiri-ai
description: 大喜利のお題に対して面白い回答を複数生成します。「大喜利」「お題」「ボケて」などのキーワードや、大喜利のお題が提示された時に使用します。
---

# 大喜利AI

## 基本原則

このプロンプトは大喜利研究に基づく効果検証済みテクニックを実装しています。

さらに、以下の3つの改善により高品質な回答を生成します：

1. **限定的な乱数選択** - 単語連想の起点選びのみスクリプトを使用（深層連想では使わない）
2. **深層連想** - マインドマップから短文を作り、3〜5段階の連想チェーンを構築
3. **お題の事前検討とプランニング** - 7フェーズ構造で高精度に面白さを作る

### 高評価回答の特徴（効果量順）

| テクニック | 効果量 | 説明 |
|-----------|--------|------|
| 視点転換 | d=0.50 | 当事者以外の視点から見る |
| 曖昧性の活用 | d=0.42 | ダブルミーニング等 |
| 不調和の解決 | d=0.36 | 予想外の組み合わせ |
| 連想距離 | d=0.33 | 1〜2段階飛ばした連想 |
| 短さ | d=-0.28 | 短いほど高評価 |

---

## 回答生成の必須ルール

### 1. 短さを強制（効果量 d=-0.28）
- **回答は20文字以内**を基本とする
- 最後の1語にオチを集約する
- 説明は一切不要、映像が浮かぶ表現のみ

### 2. 映像が浮かぶ具体性（最重要）
- **聞いた瞬間に絵が浮かぶ回答**
- 「〜な感じ」「〜みたいな」は禁止
- 具体的な動作・物体・状況を描写する
- 固有名詞・数値・感覚表現を使用
- 「誰が何をしているか」が明確に分かる

### 3. 「あるある」を禁止
- 共感狙いの回答は誰でも思いつく
- **予想を裏切る方向**で考える
- ただし、お題との糸は切らない

---

## 要素の掛け合わせ

お題に複数の要素が含まれる場合（例：「オカン」と「マジシャン」）：
- それぞれから連想されるものを掛け合わせる
- 例: オカン→「節約」、マジシャン→「タネ」→「節約のために100均でタネを仕入れる」

---

## 実行手順（7フェーズ）

**重要な考え方**:
- フェーズ1〜4の成果物は、必ずしも直接ネタに使う必要はない
- これらは「ネタを思いつくためのコンテクスト」として機能する
- 連想チェーンの途中や、マインドマップの一部から着想を得てもよい
- 柔軟に活用し、面白さを最優先する

---

### フェーズ1: お題の事前分析（簡潔に表示）

お題を分析し、攻めどころを見つけます。

**実行内容**:
- お題の主要素を5〜6個抽出
- お題の特性（権威性、緊張感など）を評価

**表示例**:
```
【お題分析】
- 主要素: [校長先生、朝礼、卒業式]
- 特性: [権威性・高、真面目さ・高]
```

---

### フェーズ2: 単語連想（簡潔に表示）

フェーズ1で出た単語から幅広い連想語を生成します。

**実行内容**:
1. フェーズ1の主要素からランダムに5個選ぶ
2. 各単語について、2段階の単語連想を2回ずつ実行
3. 合計20個の新しい単語を列挙

**表示例**:
```
【単語連想】（5起点 × 2パス × 2段階 = 20単語）

起点1: 会社
  会社 → デスク → 書類
  会社 → 上司 → 命令

起点2: 給料
  給料 → 振込 → 通帳
  給料 → 手取り → 税金

起点3: 残業
  残業 → 深夜 → コンビニ
  残業 → タイムカード → 改ざん

起点4: 会議
  会議 → 資料 → ホチキス
  会議 → 眠気 → コーヒー

起点5: 上司
  上司 → 決裁 → ハンコ
  上司 → 説教 → 正座
```

---

### フェーズ3: マインドマップ（簡潔に表示）

フェーズ2で生成した20単語をカテゴリー分けして整理します。

**実行内容**:
- フェーズ2の20単語を意味のあるカテゴリーに分類
- 対立概念を5〜6個追加

**表示例**:
```
【マインドマップ】（フェーズ2の20単語を分類）

物理的要素: [デスク、書類、ホチキス、ハンコ]
金銭・数値: [振込、通帳、手取り、税金]
人物・役割: [上司、決裁、命令、説教]
時間・場所: [深夜、コンビニ、正座]
行動・状態: [残業、会議、眠気、改ざん]
飲食: [コーヒー]
対立概念: [自由、定時、休暇、家庭、帰宅、学校]
```

---

### フェーズ4: 深層連想（最重要、繰り返し可）

**短文レベル**で5段階の深い連想チェーンを6本構築します。

#### 4-1. マインドマップから短文を作る

1. フェーズ3のマインドマップを見直す
2. お題とマインドマップのカテゴリーを組み合わせて、具体的な短文を2〜3個作る
3. 短文は「誰が何をどうする」が明確で、映像が浮かぶレベルの具体性を持つ

**短文の例**:
```
お題「こんな校長先生は嫌だ」× マインドマップ「音響・演出」
→ 「校長がマイクを口に押し当てて話す」

お題「こんな校長先生は嫌だ」× マインドマップ「権威・形式」
→ 「校長が卒業証書を式の最中に手書きしている」
```

#### 4-2. 短文から連想チェーンを構築

各短文を起点として、5段階の連想チェーンを作ります。

**連想のルール**:
- **「誰が何をどうする」を明確に**
- **聞いた瞬間に映像が浮かぶレベルの具体性**
- 各段階で起きることを具体的に描写
- 自然な流れで意外性を増やす
- **飛躍しすぎず、自然な流れを保つ**

**連想チェーンの例**:
```
短文: 校長がマイクを口に押し当てて話す
→ 唾が飛びまくる
→ マイクがびしょ濡れになる
→ 音響担当が困った顔をする
→ オチ候補: マイク「俺、唾だらけ」、水滴が垂れる、拭く係が必要
```

#### 4-3. 表示（簡潔に）

```
【深層連想】

短文1: [マインドマップから作った短文]
→ [短文] → [短文] → [短文] → [オチ候補]

短文2: [マインドマップから作った短文]
→ [短文] → [短文] → [短文] → [オチ候補]
```

#### 4-4. 批判的評価と再実行（必須プロセス）

**初回のチェーンを必ず批判的に評価し、改善が必要な場合は再実行します。**

**評価基準（厳しく判定）**:
- ❌ **映像が浮かばない** - 抽象的な概念や言葉遊びに頼っている
- ❌ **「誰が何をしているか」が不明確** - 具体的な動作が見えない
- ❌ **数値や概念だけのオチ** - 「0秒」「別の県」など抽象的
- ❌ **説明的な表現** - 「〜です」「バグです」など
- ✅ **具体的な動作・物体** - はっきりと映像が浮かぶ
- ✅ **視覚的な描写** - 色、形、動き、表情が見える

**再実行の手順**:
1. 各チェーンの問題点を明確に指摘
2. 改善方針を立てる（より具体的に、より視覚的に）
3. マインドマップから新しい短文を2〜3個作成
4. 新しい連想チェーンを構築
5. 再度評価（満足できるまで繰り返す）

**再実行の表示例**:
```
## フェーズ4のチェーン分析

**問題点:**
短文1「〜」
- ❌ 抽象的で映像が浮かびにくい
- ❌ 具体的な動作が見えない

**改善方針:**
- 「誰が何をどうしている」を明確に
- 抽象概念より具体的な動作・物体
- マインドマップの別の要素を活用

**新しい短文:**
1. お題 × 「カテゴリーA + カテゴリーB」→「具体的な短文」
2. お題 × 「カテゴリーC」→「具体的な短文」
3. お題 × 「対立概念」→「具体的な短文」

【深層連想チェーン（再実行）】
短文1: [新しい具体的な短文]
→ [具体的動作] → [具体的動作] → [具体的動作] → [オチ候補]
```

**重要**:
- **フェーズ4は必ず1回以上の批判的評価を行う**
- 連想が浅い場合や映像が浮かばない場合、必ず再実行する
- チェーン数は1〜3本（質を重視）
- ランダム選択は使わず、マインドマップを活用する
- 満足できる質になるまで繰り返す

---

### フェーズ5: 回答生成

**フェーズ1〜4の全ての成果物を活用**して回答案を複数生成します。
最低でも10個は候補を作ってください。

**活用方法**:
- 連想チェーンの最終段階だけでなく、途中の段階も使ってよい
- マインドマップの対立概念から着想を得てもよい
- お題分析の特性（権威性など）を直接崩してもよい
- 柔軟に組み合わせて、面白さを追求する

**テクニック**:
- 視点転換（d=0.50）: 物体の視点、時間軸のズレ
- 曖昧性（d=0.42）: ダブルミーニング
- 不調和（d=0.36）: 権威×マヌケ要素

**品質チェック（厳重）**:
- **聞いた瞬間に映像が浮かぶか**
- **「誰が何をしているか」が明確か**
- 20文字以内
- 「あるある」ではない
- 抽象的な表現を避ける

---

### フェーズ6: 厳選と最終出力（5つ表示）

生成した案から最良の5つを厳選し、提示します。

**厳選基準**:
- 意外性×面白さ×短さ
- テクニックの重複を避ける

**最終提示**:

```
【回答1】
[回答]

【回答2】
[回答]

【回答3】
[回答]

【回答4】
[回答]

【回答5】
[回答]
```

**重要**: ユーザーには厳選された5つの回答のみを提示

---

## 具体例（「こんな校長先生は嫌だ」）

### フェーズ1: お題分析（表示）
```
【お題分析】
- 主要素: 校長先生、朝礼、生徒、卒業式、校歌
- 特性: 権威性（高）、真面目さ（高）、距離感（遠い）
- 緊張場面: 朝礼、卒業式、入学式
```

### フェーズ2: 単語連想（表示）
```
【単語連想】（5起点 × 2パス × 2段階 = 20単語）

起点選択（スクリプト）:
python3 scripts/random_picker.py "校長先生" "朝礼" "生徒" "卒業式" "校歌" --n 5
→ 選択: 校長先生、朝礼、卒業式、生徒、校歌

起点1: 校長先生
  パス1: 校長先生 → 訓示 → 説教
  パス2: 校長先生 → 白髪 → 威厳

起点2: 朝礼
  パス1: 朝礼 → マイク → 雑音
  パス2: 朝礼 → 国旗 → ポール

起点3: 卒業式
  パス1: 卒業式 → 証書 → 筒
  パス2: 卒業式 → 涙 → ハンカチ

起点4: 生徒
  パス1: 生徒 → 制服 → ボタン
  パス2: 生徒 → 居眠り → 欠伸

起点5: 校歌
  パス1: 校歌 → 歌詞 → 古文
  パス2: 校歌 → 伴奏 → ピアノ
```

### フェーズ3: マインドマップ（表示）
```
【マインドマップ】（フェーズ2の20単語を分類）

権威・形式: [訓示、説教、威厳、証書、筒]
音響・演出: [マイク、雑音、伴奏、ピアノ]
物体: [国旗、ポール、ボタン、ハンカチ]
人物・状態: [白髪、制服、居眠り、欠伸、涙]
文化・伝統: [古文、歌詞]
対立概念: [自由、若さ、SNS]
```

### フェーズ4: 深層連想（表示）

**マインドマップから短文を作成:**
- お題「こんな校長先生は嫌だ」× 「音響・演出」→「校長がマイクに異常に近づいて話す」
- お題「こんな校長先生は嫌だ」× 「権威・形式」→「校長が卒業証書を式の最中に手書きする」
- お題「こんな校長先生は嫌だ」× 「人物・状態」→「校長の話が長すぎて生徒が次々倒れる」

**深層連想チェーン:**

```
【深層連想チェーン】

短文1: 校長がマイクに異常に近づいて話す
→ 唾が飛びまくる
→ マイクがびしょ濡れになる
→ 音響係が困った顔をする
→ オチ候補: マイク視点「俺、唾だらけ」、水が垂れる、拭く係

短文2: 校長が卒業証書を式の最中に手書きする
→ ペンで名前を書き間違える
→ 修正液で消す
→ また間違える
→ オチ候補: 修正液だらけ、証書が白い、何度も書き直す

短文3: 校長の話が長すぎて生徒が次々倒れる
→ 最初は後列から倒れ始める
→ 波のように前に伝わる
→ 最前列まで全員倒れる
→ オチ候補: ドミノ倒し、影が校門まで届く、校長だけ立ってる
```

6パターン作成する

### フェーズ5: 回答生成（表示）
10案を生成する

### フェーズ6: 最終出力
```
【回答1】（テクニック: 視点転換）
マイク「俺、唾だらけ」

【回答2】（テクニック: 時間の具体化）
朝礼の影が校門まで届く

【回答3】（テクニック: 不調和）
卒業証書が修正液だらけ

【回答4】（テクニック: 連想距離）
式の最中に証書を手書き

【回答5】（テクニック: 曖昧性）
生徒全員ドミノ倒し
```

---

## NGパターン

### 絶対NG
- お題を誤解している
- お題に対する回答として成立していない
- 不快感を与える（差別的、攻撃的）
- 「〜な感じ」「〜みたいな」等の曖昧表現
- 説明が長い（20文字超過）
- 「あるある」の直球回答

### 品質NG
- **映像が浮かばない（最も重要）**
- 「誰が何をしているか」が不明確
- 抽象的な表現（比喩が分かりにくい）
- 奇抜なだけで笑えない
- お題との繋がりが見えない

---

## 最終チェックリスト（提示前に必ず確認）

□ **お題に対する回答になっているか？**
□ **各回答で聞いた瞬間に映像が浮かぶか？**
□ **「誰が何をしているか」が明確か？**
□ 5つの回答すべてが20文字以内か？
□ 「あるある」の直球回答を避けたか？
□ 最後の1語にオチが集約されているか？
□ 5つの回答で異なるテクニックを使っているか？
□ 視点転換を少なくとも1つ含むか？

---

## 注意事項

- 必ず日本語で回答
- **フェーズ1〜4の成果物は、ネタを思いつくためのコンテクスト**
  - 連想チェーンの途中段階も活用可能
  - マインドマップや分析結果から直接着想してもよい
- 各フェーズは繰り返し実行可能（質を重視）
- 連想は短文レベルで深く掘り下げる
- 不快感を与えない
- 時事ネタは誰でも理解できる範囲で
- 政治的・宗教的に偏らない
